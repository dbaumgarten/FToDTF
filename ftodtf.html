
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>ftodtf package &#8212; FToDTF  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="ftodtf-package">
<h1>ftodtf package<a class="headerlink" href="#ftodtf-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-ftodtf.cli">
<span id="ftodtf-cli-module"></span><h2>ftodtf.cli module<a class="headerlink" href="#module-ftodtf.cli" title="Permalink to this headline">¶</a></h2>
<p>This module handles parsing of cli-flags and then calls the needed function
from the library</p>
<dl class="function">
<dt id="ftodtf.cli.add_arguments_to_parser">
<code class="descclassname">ftodtf.cli.</code><code class="descname">add_arguments_to_parser</code><span class="sig-paren">(</span><em>arglist</em>, <em>parser</em>, <em>required</em>, <em>group=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.cli.add_arguments_to_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds arguments (obtained from the settings-class) to an agrparse-parser</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>arglist</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – A list of strings representing the names of the flags to add</li>
<li><strong>parser</strong> (<em>argparse.ArgumentParser</em>) – The parser to add the arguments to</li>
<li><strong>required</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – A list of argument-names that are required for the command</li>
<li><strong>group</strong> (<em>str</em>) – If set place the arguments in an argument-group of the specified name</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ftodtf.cli.cli_main">
<code class="descclassname">ftodtf.cli.</code><code class="descname">cli_main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.cli.cli_main" title="Permalink to this definition">¶</a></dt>
<dd><p>Program entry point.</p>
</dd></dl>

<dl class="function">
<dt id="ftodtf.cli.show_prog">
<code class="descclassname">ftodtf.cli.</code><code class="descname">show_prog</code><span class="sig-paren">(</span><em>q</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.cli.show_prog" title="Permalink to this definition">¶</a></dt>
<dd><p>Show progressbar, converges against the next max progress_bar.n and
finishes only when the function “write_batches_to_file” ends.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>q</strong> – Process which handles the progressbar.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ftodtf.cli.spawn_progress_bar">
<code class="descclassname">ftodtf.cli.</code><code class="descname">spawn_progress_bar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.cli.spawn_progress_bar" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will spawn a new process using multiprocessing module.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A child process.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-ftodtf.inference">
<span id="ftodtf-inference-module"></span><h2>ftodtf.inference module<a class="headerlink" href="#module-ftodtf.inference" title="Permalink to this headline">¶</a></h2>
<p>This module contains functions to use trained word-embeddings to do usefull things
Currently the only implemented thing is to compute the similarities between words.</p>
<dl class="class">
<dt id="ftodtf.inference.PrintSimilarityHook">
<em class="property">class </em><code class="descclassname">ftodtf.inference.</code><code class="descname">PrintSimilarityHook</code><span class="sig-paren">(</span><em>every_n_steps</em>, <em>similarityop</em>, <em>words</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.inference.PrintSimilarityHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.training.basic_session_run_hooks.StepCounterHook</span></code></p>
<p>Implements a Hook that computes and printes the similarity between given words every x-steps.
To be used with tf.train.MonitoredTrainingSession</p>
<dl class="method">
<dt id="ftodtf.inference.PrintSimilarityHook.after_run">
<code class="descname">after_run</code><span class="sig-paren">(</span><em>run_context</em>, <em>run_values</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.inference.PrintSimilarityHook.after_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after each call to run().</p>
<p>The <cite>run_values</cite> argument contains results of requested ops/tensors by
<cite>before_run()</cite>.</p>
<p>The <cite>run_context</cite> argument is the same one send to <cite>before_run</cite> call.
<cite>run_context.request_stop()</cite> can be called to stop the iteration.</p>
<p>If <cite>session.run()</cite> raises any exceptions then <cite>after_run()</cite> is not called.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>run_context: A <cite>SessionRunContext</cite> object.
run_values: A SessionRunValues object.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ftodtf.inference.PrintSimilarityHook.before_run">
<code class="descname">before_run</code><span class="sig-paren">(</span><em>run_context</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.inference.PrintSimilarityHook.before_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called before each call to run().</p>
<p>You can return from this call a <cite>SessionRunArgs</cite> object indicating ops or
tensors to add to the upcoming <cite>run()</cite> call.  These ops/tensors will be run
together with the ops/tensors originally passed to the original run() call.
The run args you return can also contain feeds to be added to the run()
call.</p>
<p>The <cite>run_context</cite> argument is a <cite>SessionRunContext</cite> that provides
information about the upcoming <cite>run()</cite> call: the originally requested
op/tensors, the TensorFlow Session.</p>
<p>At this point graph is finalized and you can not add ops.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>run_context: A <cite>SessionRunContext</cite> object.</dd>
<dt>Returns:</dt>
<dd>None or a <cite>SessionRunArgs</cite> object.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ftodtf.inference.compute_similarities">
<code class="descclassname">ftodtf.inference.</code><code class="descname">compute_similarities</code><span class="sig-paren">(</span><em>words</em>, <em>settings</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.inference.compute_similarities" title="Permalink to this definition">¶</a></dt>
<dd><p>Use trained embeddigs to compute the similarity between given input-words</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>words</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – A list of words to compare to each other</li>
<li><strong>settings</strong> (<em>ftodtf.settings.FastTextSettings</em>) – The settings for the fasttext-model</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ftodtf.inference.print_similarity">
<code class="descclassname">ftodtf.inference.</code><code class="descname">print_similarity</code><span class="sig-paren">(</span><em>similarity</em>, <em>words</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.inference.print_similarity" title="Permalink to this definition">¶</a></dt>
<dd><p>Print similarity between given words
:param similarity: A matrix of format len(words)xlen(words) containing the similarity between words
:param list(str) words: Words to print the similarity for</p>
</dd></dl>

</div>
<div class="section" id="module-ftodtf.input">
<span id="ftodtf-input-module"></span><h2>ftodtf.input module<a class="headerlink" href="#module-ftodtf.input" title="Permalink to this headline">¶</a></h2>
<p>This module handles all the input-relatet tasks like loading, pre-processing
and batching</p>
<dl class="class">
<dt id="ftodtf.input.InputProcessor">
<em class="property">class </em><code class="descclassname">ftodtf.input.</code><code class="descname">InputProcessor</code><span class="sig-paren">(</span><em>settings</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.input.InputProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles the creation of training-examble-batches from the raw training-text</p>
<p>Constructor of InputProcessor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>settings</strong> (<a class="reference internal" href="#ftodtf.settings.FasttextSettings" title="ftodtf.settings.FasttextSettings"><em>ftodtf.settings.FasttextSettings</em></a>) – An object encapsulating all the settings for the fasttext-model</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ftodtf.input.InputProcessor.batches">
<code class="descname">batches</code><span class="sig-paren">(</span><em>passes=1</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.input.InputProcessor.batches" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator the will yield an infinite amout of training-batches ready to feed into the model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>repetitions</strong> (<em>int</em>) – How many passes over the input data should be done. Default: 1. 0 will repeat the input forever.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ftodtf.input.InputProcessor.preprocess">
<code class="descname">preprocess</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.input.InputProcessor.preprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the needed proprocessing of the dataset. Count word frequencies,
create a mapping word-&gt;int</p>
</dd></dl>

<dl class="method">
<dt id="ftodtf.input.InputProcessor.string_samples">
<code class="descname">string_samples</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.input.InputProcessor.string_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator for samples (targetword-&gt;contextword)
:returns: A generator yielding 2-tuple consisting of a target-word and a context word.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ftodtf.input.generate_ngram_per_word">
<code class="descclassname">ftodtf.input.</code><code class="descname">generate_ngram_per_word</code><span class="sig-paren">(</span><em>word</em>, <em>ngram_window=2</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.input.generate_ngram_per_word" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates ngram strings of the specified size for a given word.
Before processing beginning and end of the word will be marked with “*”.
The ngrams will also include the full word (including the added <a href="#id1"><span class="problematic" id="id2">*</span></a>s).
This is the same process as described in the fasttext paper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>word</strong> (<em>str</em>) – The token string which represents a word.</li>
<li><strong>ngram_window</strong> (<em>int</em>) – The size of the ngrams</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A generator which yields ngrams.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ftodtf.input.hash_string_list">
<code class="descclassname">ftodtf.input.</code><code class="descname">hash_string_list</code><span class="sig-paren">(</span><em>strings</em>, <em>buckets</em>, <em>offset=0</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.input.hash_string_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Hashes each element in a list of strings using the FNVa1 algorithm.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>strings</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – A list of strings to hash.</li>
<li><strong>buckets</strong> (<em>int</em>) – How many different hash-values to produce maximally. (all Hashes are mod buckets)</li>
<li><strong>offset</strong> (<em>int</em>) – The smallest possible hash value. Can be used to make hashvalues start at an other number then 0</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ftodtf.input.inform_progressbar">
<code class="descclassname">ftodtf.input.</code><code class="descname">inform_progressbar</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.input.inform_progressbar" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator used to put the function names into the QUEUE for showing the
progress in the progressbar
:param func: The function which should be decorated.</p>
</dd></dl>

<dl class="function">
<dt id="ftodtf.input.pad_to_length">
<code class="descclassname">ftodtf.input.</code><code class="descname">pad_to_length</code><span class="sig-paren">(</span><em>li</em>, <em>length</em>, <em>pad=''</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.input.pad_to_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Pads a given list to a given length with a given padding-element</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>li</strong> (<em>list</em><em>(</em><em>)</em>) – The list to be padded</li>
<li><strong>length</strong> (<em>int</em>) – The length to pad the list to</li>
<li><strong>pad</strong> (<em>object</em>) – The element to add to the list until the desired length is reached</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ftodtf.input.words_to_ngramhashes">
<code class="descclassname">ftodtf.input.</code><code class="descname">words_to_ngramhashes</code><span class="sig-paren">(</span><em>words</em>, <em>num_buckets</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.input.words_to_ngramhashes" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a list of words into a list of padded lists of ngrams-hashes.
The resulting matrix can then be used to compute the word-verctors for the original words
:param list(str) words: The words to convert
:param int num_buckets: The number of hash-buckets to use when hashing the ngrams
:returns: list(list(int))</p>
</dd></dl>

<dl class="function">
<dt id="ftodtf.input.write_batches_to_file">
<code class="descclassname">ftodtf.input.</code><code class="descname">write_batches_to_file</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.input.write_batches_to_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-ftodtf.model">
<span id="ftodtf-model-module"></span><h2>ftodtf.model module<a class="headerlink" href="#module-ftodtf.model" title="Permalink to this headline">¶</a></h2>
<p>This module handles the building of the tf execution graph</p>
<dl class="class">
<dt id="ftodtf.model.InferenceModel">
<em class="property">class </em><code class="descclassname">ftodtf.model.</code><code class="descname">InferenceModel</code><span class="sig-paren">(</span><em>settings</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.model.InferenceModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Builds and represents the tensorflow computation graph for using the trained embeddings. Exports all important operations via fields.
An existing checkpoint must be loaded via load() before this model can be used to compute anything.</p>
<p>Constuctor for Model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>settings</strong> (<a class="reference internal" href="#ftodtf.settings.FasttextSettings" title="ftodtf.settings.FasttextSettings"><em>ftodtf.settings.FasttextSettings</em></a>) – An object encapsulating all the settings for the fasttext-model</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ftodtf.model.InferenceModel.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>logdir</em>, <em>session</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.model.InferenceModel.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loades pre-trained embeddings from the filesystem</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>logdir</strong> (<em>str</em>) – The path of the folder where the checkpoints created by the training were saved</li>
<li><strong>session</strong> (<em>tf.Session</em>) – The session to restore the variables into</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ftodtf.model.TrainingModel">
<em class="property">class </em><code class="descclassname">ftodtf.model.</code><code class="descname">TrainingModel</code><span class="sig-paren">(</span><em>settings</em>, <em>cluster=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.model.TrainingModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Builds and represents the tensorflow computation graph for the training of the embeddings. Exports all important operations via fields</p>
<p>Constuctor for Model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>settings</strong> (<a class="reference internal" href="#ftodtf.settings.FasttextSettings" title="ftodtf.settings.FasttextSettings"><em>ftodtf.settings.FasttextSettings</em></a>) – An object encapsulating all the settings for the fasttext-model</li>
<li><strong>cluster</strong> – A tf.train.ClusterSpec object describint the tf-cluster. Needed for variable and ops-placement</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ftodtf.model.TrainingModel.get_scaffold">
<code class="descname">get_scaffold</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.model.TrainingModel.get_scaffold" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tf.train.Scaffold object describing this graph</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">tf.train.Scaffold</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ftodtf.model.compute_word_similarities">
<code class="descclassname">ftodtf.model.</code><code class="descname">compute_word_similarities</code><span class="sig-paren">(</span><em>ngramhashmatrix</em>, <em>embeddings</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.model.compute_word_similarities" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tensorflow-operation that computes the similarities between all input-words using the given embeddings</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ngramhashmatrix</strong> (<em>tf.Tensor</em>) – A list of lists of ngram-hashes, each list represents the ngrams for one word. (In principle a trainings-batch without labels)</li>
<li><strong>embeddings</strong> (<em>tf.Tensor</em>) – The embeddings to use for converting words to vectors. (Can be a list of tensors)</li>
<li><strong>num_buckets</strong> (<em>int</em>) – The number of hash-buckets used when hashing ngrams</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ftodtf.model.create_embedding_weights">
<code class="descclassname">ftodtf.model.</code><code class="descname">create_embedding_weights</code><span class="sig-paren">(</span><em>settings</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.model.create_embedding_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a (partitioned) tensorflow variable for the word-embeddings
Exists as seperate function to minimize code-duplication between training and inference-models</p>
</dd></dl>

<dl class="function">
<dt id="ftodtf.model.ngrams_to_vectors">
<code class="descclassname">ftodtf.model.</code><code class="descname">ngrams_to_vectors</code><span class="sig-paren">(</span><em>ngrams</em>, <em>embeddings</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.model.ngrams_to_vectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a tensorflow operation converting a batch consisting of lists of ngrams for a word to a list of vectors. One vector for each word</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ngrams</strong> – A batch of lists of ngrams</li>
<li><strong>embeddings</strong> – The embeddings to use as tensorflow variable. Can also be a list of variables.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a batch of vectors</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ftodtf.model.parse_batch_func">
<code class="descclassname">ftodtf.model.</code><code class="descname">parse_batch_func</code><span class="sig-paren">(</span><em>batch_size</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.model.parse_batch_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a function that can parse a batch from a tfrecord-entry</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>batch_size</strong> (<em>int</em>) – How many samples are in a batch</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-ftodtf.settings">
<span id="ftodtf-settings-module"></span><h2>ftodtf.settings module<a class="headerlink" href="#module-ftodtf.settings" title="Permalink to this headline">¶</a></h2>
<p>This module contains the FasttextSettings class</p>
<dl class="class">
<dt id="ftodtf.settings.FasttextSettings">
<em class="property">class </em><code class="descclassname">ftodtf.settings.</code><code class="descname">FasttextSettings</code><a class="headerlink" href="#ftodtf.settings.FasttextSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class contains all the settings for the fasttext-training and also handles things like validation. Use the attributes/variables of this class to set hyperparameters for the model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first last simple">
<li><strong>corpus_path</strong> (<em>str</em>) – Path to the file containing text for training the model.</li>
<li><strong>batches_file</strong> (<em>str</em>) – The Filename for the file containing the training-batches. The file is written by the preprocess command and read by the train command.</li>
<li><strong>log_dir</strong> (<em>str</em>) – Directory to write the generated files (e.g. the computed word-vectors) to and read/write checkoints from.</li>
<li><strong>steps</strong> (<em>int</em>) – How many training steps to perform.</li>
<li><strong>vocabulary_size</strong> (<em>int</em>) – How many words the vocabulary will have. Only the vocabulary_size most frequent words will be processed.</li>
<li><strong>batch_size</strong> (<em>int</em>) – How many trainings-samples to process per batch.</li>
<li><strong>embedding_size</strong> (<em>int</em>) – Dimension of the computed embedding vectors.</li>
<li><strong>skip_window</strong> (<em>int</em>) – How many words to consider left and right of the target-word maximally. The actual window is randomly sampled for each word between 1 and this value</li>
<li><strong>num_sampled</strong> (<em>int</em>) – Number of negative examples to sample when computing the nce_loss.</li>
<li><strong>ngram_size</strong> (<em>int</em>) – How large the ngrams (in which the target words are split) should be.</li>
<li><strong>num_buckets</strong> (<em>int</em>) – How many hash-buckets to use when hashing the ngrams to numbers.</li>
<li><strong>validation_words</strong> (<em>str</em>) – A string of comma-seperated words. The similarity of these words to each other will be regularily computed and printed to indicade the progress of the training.</li>
<li><strong>profile</strong> (<em>boolean</em>) – If set to True tensorflow will profile the graph-execution and writer results to ./profile.json.</li>
<li><strong>learnrate</strong> (<em>float</em>) – The starting learnrate for the training. The actual learnrate will lineraily decrease to beyth 0 when the specified amount of training-steps is reached.</li>
<li><strong>rejection_threshold</strong> (<em>float</em>) – In order to subsample the most frequent words.</li>
<li><strong>job</strong> (<em>string</em>) – The role of this node in a distributed setup. Can be worker’ or ‘ps’.</li>
<li><strong>workers</strong> (<em>str</em>) – A comma seperated list of host:port combinations representing the workers in the distributed setup.</li>
<li><strong>ps</strong> (<em>str</em>) – A comma seperated list of host:port combinations representing the parameter servers in the distributed setup. If empty a non-distributed setup is assumed.</li>
<li><strong>num_batch_files</strong> (<em>int</em>) – Number of batch files which should be created.</li>
<li><strong>index</strong> (<em>int</em>) – The of the node itself in the list of –workers (or –ps, depending on –job).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ftodtf.settings.FasttextSettings.attribute_docstring">
<code class="descname">attribute_docstring</code><span class="sig-paren">(</span><em>attribute</em>, <em>include_defaults=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.FasttextSettings.attribute_docstring" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the name of an attribute of this class, this function will return the docstring for the attribute.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>attribute</strong> (<em>str</em>) – The name of the attribute</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The docstring for the attribute</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="ftodtf.settings.FasttextSettings.distribution_settings">
<em class="property">static </em><code class="descname">distribution_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.FasttextSettings.distribution_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of the settings that are used for configuren the tensoflow-cluster</p>
</dd></dl>

<dl class="staticmethod">
<dt id="ftodtf.settings.FasttextSettings.inference_settings">
<em class="property">static </em><code class="descname">inference_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.FasttextSettings.inference_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of the settings that are used for the infer
command</p>
</dd></dl>

<dl class="staticmethod">
<dt id="ftodtf.settings.FasttextSettings.preprocessing_settings">
<em class="property">static </em><code class="descname">preprocessing_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.FasttextSettings.preprocessing_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of the settings that are used for the preprocessing
command</p>
</dd></dl>

<dl class="attribute">
<dt id="ftodtf.settings.FasttextSettings.ps_list">
<code class="descname">ps_list</code><a class="headerlink" href="#ftodtf.settings.FasttextSettings.ps_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns ps as list of strings instead of a comma
seperate string like the attribute would do
:returns: A list of strings if ps is set and else None</p>
</dd></dl>

<dl class="staticmethod">
<dt id="ftodtf.settings.FasttextSettings.training_settings">
<em class="property">static </em><code class="descname">training_settings</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.FasttextSettings.training_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of the settings that are used for the training
command</p>
</dd></dl>

<dl class="method">
<dt id="ftodtf.settings.FasttextSettings.validate_preprocess">
<code class="descname">validate_preprocess</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.FasttextSettings.validate_preprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the current settings are valid for pre processing.
:raises: ValueError if the validation fails</p>
</dd></dl>

<dl class="method">
<dt id="ftodtf.settings.FasttextSettings.validate_train">
<code class="descname">validate_train</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.FasttextSettings.validate_train" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the current settings are valid for training.
:raises: ValueError if the validation fails</p>
</dd></dl>

<dl class="attribute">
<dt id="ftodtf.settings.FasttextSettings.validation_words_list">
<code class="descname">validation_words_list</code><a class="headerlink" href="#ftodtf.settings.FasttextSettings.validation_words_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the validation_words as list of strings instead of a comma
seperate string like the attribute would do
:returns: A list of strings if validation_words is set and else None</p>
</dd></dl>

<dl class="attribute">
<dt id="ftodtf.settings.FasttextSettings.workers_list">
<code class="descname">workers_list</code><a class="headerlink" href="#ftodtf.settings.FasttextSettings.workers_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns workers as list of strings instead of a comma
seperate string like the attribute would do
:returns: A list of strings if workers is set and else None</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_batch_size">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_batch_size</code><span class="sig-paren">(</span><em>batch_size</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_batch_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_batches_file">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_batches_file</code><span class="sig-paren">(</span><em>batches_file</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_batches_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_corpus_path">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_corpus_path</code><span class="sig-paren">(</span><em>corpus_path</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_corpus_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_embedding_size">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_embedding_size</code><span class="sig-paren">(</span><em>embedding_size</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_embedding_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_index">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_index</code><span class="sig-paren">(</span><em>job</em>, <em>workers</em>, <em>ps</em>, <em>index</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_job">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_job</code><span class="sig-paren">(</span><em>job</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_job" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_learn_rate">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_learn_rate</code><span class="sig-paren">(</span><em>learnrate</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_learn_rate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_log_dir">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_log_dir</code><span class="sig-paren">(</span><em>log_dir</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_log_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_ngram_size">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_ngram_size</code><span class="sig-paren">(</span><em>ngram_size</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_ngram_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_nodelist">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_nodelist</code><span class="sig-paren">(</span><em>noli</em>, <em>allow_empty=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_nodelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the given argument is a comma seperated list of host:port strings.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">ValueError if it is not</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_num_buckets">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_num_buckets</code><span class="sig-paren">(</span><em>number_buckets</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_num_buckets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_num_sampled">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_num_sampled</code><span class="sig-paren">(</span><em>num_sampled</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_num_sampled" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_rejection_threshold">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_rejection_threshold</code><span class="sig-paren">(</span><em>rejection_threshold</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_rejection_threshold" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_skip_window">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_skip_window</code><span class="sig-paren">(</span><em>skip_window</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_skip_window" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_steps">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_steps</code><span class="sig-paren">(</span><em>steps</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_steps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ftodtf.settings.check_vocabulary_size">
<code class="descclassname">ftodtf.settings.</code><code class="descname">check_vocabulary_size</code><span class="sig-paren">(</span><em>vocabulary_size</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.settings.check_vocabulary_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-ftodtf.training">
<span id="ftodtf-training-module"></span><h2>ftodtf.training module<a class="headerlink" href="#module-ftodtf.training" title="Permalink to this headline">¶</a></h2>
<p>This module handles the training of the word-vectors</p>
<dl class="class">
<dt id="ftodtf.training.PrintLossHook">
<em class="property">class </em><code class="descclassname">ftodtf.training.</code><code class="descname">PrintLossHook</code><span class="sig-paren">(</span><em>every_n_steps</em>, <em>lossop</em>, <em>steptensor</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.training.PrintLossHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.training.basic_session_run_hooks.StepCounterHook</span></code></p>
<p>Implements a Hook that prints the current step and current average loss every x steps</p>
<dl class="method">
<dt id="ftodtf.training.PrintLossHook.after_run">
<code class="descname">after_run</code><span class="sig-paren">(</span><em>run_context</em>, <em>run_values</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.training.PrintLossHook.after_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after each call to run().</p>
<p>The <cite>run_values</cite> argument contains results of requested ops/tensors by
<cite>before_run()</cite>.</p>
<p>The <cite>run_context</cite> argument is the same one send to <cite>before_run</cite> call.
<cite>run_context.request_stop()</cite> can be called to stop the iteration.</p>
<p>If <cite>session.run()</cite> raises any exceptions then <cite>after_run()</cite> is not called.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>run_context: A <cite>SessionRunContext</cite> object.
run_values: A SessionRunValues object.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ftodtf.training.PrintLossHook.before_run">
<code class="descname">before_run</code><span class="sig-paren">(</span><em>run_context</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.training.PrintLossHook.before_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Called before each call to run().</p>
<p>You can return from this call a <cite>SessionRunArgs</cite> object indicating ops or
tensors to add to the upcoming <cite>run()</cite> call.  These ops/tensors will be run
together with the ops/tensors originally passed to the original run() call.
The run args you return can also contain feeds to be added to the run()
call.</p>
<p>The <cite>run_context</cite> argument is a <cite>SessionRunContext</cite> that provides
information about the upcoming <cite>run()</cite> call: the originally requested
op/tensors, the TensorFlow Session.</p>
<p>At this point graph is finalized and you can not add ops.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>run_context: A <cite>SessionRunContext</cite> object.</dd>
<dt>Returns:</dt>
<dd>None or a <cite>SessionRunArgs</cite> object.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ftodtf.training.train">
<code class="descclassname">ftodtf.training.</code><code class="descname">train</code><span class="sig-paren">(</span><em>settings</em><span class="sig-paren">)</span><a class="headerlink" href="#ftodtf.training.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the fasttext training.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>settings</strong> (<a class="reference internal" href="#ftodtf.settings.FasttextSettings" title="ftodtf.settings.FasttextSettings"><em>ftodtf.settings.FasttextSettings</em></a>) – An object encapsulating all the settings for the fasttext-model</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-ftodtf">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-ftodtf" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">FToDTF</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Daniel Baumgarten, Dimitri Denisenko.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="_sources/ftodtf.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>